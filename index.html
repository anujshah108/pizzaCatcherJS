<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>tracking.js - first tracking</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="./build/tracking-min.js"></script>
  <script src="./build/data/mouth.js"></script>
</head>
<body>
  <img id='pizza' src ='pizza.png' height='50'>
  <video id="myVideo" autoplay="true" width="300px" height='400px' preload autoplay loop muted></video>
  <script>

  var video = document.querySelector("#myVideo");

  navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;

  if (navigator.getUserMedia) {
     navigator.getUserMedia({video: true}, handleVideo, videoError);
  }

  function handleVideo(stream) {
     video.src = window.URL.createObjectURL(stream);
  }

  function videoError(e) {
     console.log(e)
  }

  window.onload = function() {
        const tracker = new tracking.ObjectTracker(['mouth']);
        tracker.setInitialScale(0.8);
        tracker.setStepSize(1.5);
        tracker.setEdgesDensity(0.1);
        tracking.track('#myVideo', tracker, { camera: true });
        tracker.on('track', function(event) {
          event.data.forEach(function(rect) {
            console.log('IN YA MOUTH', rect.x, rect.y, rect.width, rect.height)
          });
        });
      };

//   const mouth = new tracking.ObjectTracker(['mouth']);

//   mouth.on('track', function(event) {
//     if (event.data.length === 0) {
//       // No colors were detected in this frame.
//     } else {
//       event.data.forEach(function(rect) {
//         console.log('MOUTH SPOTTED AT:', rect.x, rect.y, rect.height, rect.width);
//       });
//     }
//   });

//   tracking.track('#myVideo', mouth);

// $('#pizza')

  </script>


</body>
</html>
